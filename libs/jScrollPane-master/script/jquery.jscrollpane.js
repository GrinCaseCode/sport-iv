!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(jQuery||require("jquery")):e(jQuery)}(function(e){e.fn.jScrollPane=function(t){function o(t,o){var i,s,n,r,a,l,c,p,d,u,f,h,v,g,j,m,w,y,k,b,T,C,x,S,D,B,H,P,z,A,W,R,Y,L,M=this,I=!0,X=!0,E=!1,F=!1,V=t.clone(!1,!1).empty(),q=!1,O=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",G=function(){i.resizeSensorDelay>0?setTimeout(function(){N(i)},i.resizeSensorDelay):N(i)};function N(o){var b,I,X,E,F,V,pe,de,ue=!1,fe=!1;if(i=o,b=0,I=0,void 0===s)E=t.scrollTop(),F=t.scrollLeft(),t.css({overflow:"hidden",padding:"0"}),n=t.innerWidth()+Y,r=t.innerHeight(),t.width(n),s=e('<div class="jspPane"></div>').css("padding",R).append(t.children()),a=e('<div class="jspContainer"></div>').css({width:n+"px",height:r+"px"}).append(s).appendTo(t);else{if(t.css("width",""),a.css({width:"auto",height:"auto"}),s.css("position","static"),V=t.innerWidth()+Y,pe=t.innerHeight(),s.css("position","absolute"),ue=i.stickToBottom&&function(){var e=c-r;if(1==i.maintainPosition)return e>=20&&e-le()<10;return!0}(),fe=i.stickToRight&&function(){var e=l-n;if(1==i.maintainPosition)return e>=20&&e-ae()<10;return!0}(),X=V!==n||pe!==r,n=V,r=pe,a.css({width:n+"px",height:r+"px"}),!X&&L==l&&s.outerHeight()==c)return void t.width(n);L=l,s.css("width",""),t.width(n),a.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}s.css("overflow","auto"),l=o.contentWidth?o.contentWidth:s[0].scrollWidth,c=s[0].scrollHeight,s.css("overflow",""),p=l/n,u=(d=c/r)>1||i.alwaysShowVScroll,(f=p>1||i.alwaysShowHScroll)||u?(t.addClass("jspScrollable"),i.maintainPosition&&(g||w)&&(b=ae(),I=le()),u&&(a.append(e('<div class="jspVerticalBar"></div>').append(e('<div class="jspCap jspCapTop"></div>'),e('<div class="jspTrack"></div>').append(e('<div class="jspDrag"></div>').append(e('<div class="jspDragTop"></div>'),e('<div class="jspDragBottom"></div>'))),e('<div class="jspCap jspCapBottom"></div>'))),y=a.find(">.jspVerticalBar"),k=y.find(">.jspTrack"),h=k.find(">.jspDrag"),i.showArrows&&(x=e('<a class="jspArrow jspArrowUp"></a>').on("mousedown.jsp",J(0,-1)).on("click.jsp",ce),S=e('<a class="jspArrow jspArrowDown"></a>').on("mousedown.jsp",J(0,1)).on("click.jsp",ce),i.arrowScrollOnHover&&(x.on("mouseover.jsp",J(0,-1,x)),S.on("mouseover.jsp",J(0,1,S))),$(k,i.verticalArrowPositions,x,S)),T=r,a.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){T-=e(this).outerHeight()}),h.on("mouseenter",function(){h.addClass("jspHover")}).on("mouseleave",function(){h.removeClass("jspHover")}).on("mousedown.jsp",function(t){e("html").on("dragstart.jsp selectstart.jsp",ce),h.addClass("jspActive");var o=t.pageY-h.position().top;return e("html").on("mousemove.jsp",function(e){ee(e.pageY-o,!1)}).on("mouseup.jsp mouseleave.jsp",_),!1}),Q()),f&&(a.append(e('<div class="jspHorizontalBar"></div>').append(e('<div class="jspCap jspCapLeft"></div>'),e('<div class="jspTrack"></div>').append(e('<div class="jspDrag"></div>').append(e('<div class="jspDragLeft"></div>'),e('<div class="jspDragRight"></div>'))),e('<div class="jspCap jspCapRight"></div>'))),D=a.find(">.jspHorizontalBar"),B=D.find(">.jspTrack"),j=B.find(">.jspDrag"),i.showArrows&&(z=e('<a class="jspArrow jspArrowLeft"></a>').on("mousedown.jsp",J(-1,0)).on("click.jsp",ce),A=e('<a class="jspArrow jspArrowRight"></a>').on("mousedown.jsp",J(1,0)).on("click.jsp",ce),i.arrowScrollOnHover&&(z.on("mouseover.jsp",J(-1,0,z)),A.on("mouseover.jsp",J(1,0,A))),$(B,i.horizontalArrowPositions,z,A)),j.on("mouseenter",function(){j.addClass("jspHover")}).on("mouseleave",function(){j.removeClass("jspHover")}).on("mousedown.jsp",function(t){e("html").on("dragstart.jsp selectstart.jsp",ce),j.addClass("jspActive");var o=t.pageX-j.position().left;return e("html").on("mousemove.jsp",function(e){oe(e.pageX-o,!1)}).on("mouseup.jsp mouseleave.jsp",_),!1}),H=a.innerWidth(),U()),function(){if(f&&u){var t=B.outerHeight(),o=k.outerWidth();T-=t,e(D).find(">.jspCap:visible,>.jspArrow").each(function(){H+=e(this).outerWidth()}),H-=o,r-=o,n-=t,B.parent().append(e('<div class="jspCorner"></div>').css("width",t+"px")),Q(),U()}f&&s.width(a.outerWidth()-Y+"px");c=s.outerHeight(),d=c/r,f&&((P=Math.ceil(1/p*H))>i.horizontalDragMaxWidth?P=i.horizontalDragMaxWidth:P<i.horizontalDragMinWidth&&(P=i.horizontalDragMinWidth),j.css("width",P+"px"),m=H-P,ie(w));u&&((C=Math.ceil(1/d*T))>i.verticalDragMaxHeight?C=i.verticalDragMaxHeight:C<i.verticalDragMinHeight&&(C=i.verticalDragMinHeight),h.css("height",C+"px"),v=T-C,te(g))}(),(i.stickToBottom||i.stickToRight)&&(ne(fe?l-n:b,!1),se(ue?c-r:I,!1)),s.find(":input,a").off("focus.jsp").on("focus.jsp",function(e){re(e.target,!1)}),a.off(O).on(O,function(e,t,o,s){w||(w=0),g||(g=0);var n=w,r=g,a=e.deltaFactor||i.mouseWheelSpeed;return M.scrollBy(o*a,-s*a,!1),n==w&&r==g}),a.on("touchend.jsp",function(e){}).on("click.jsp-touchclick",function(e){if(de)return de=!1,!1}),i.enableKeyboardNavigation&&function(){var o,n,l=[];f&&l.push(D[0]);u&&l.push(y[0]);s.on("focus.jsp",function(){t.focus()}),t.attr("tabindex",0).off("keydown.jsp keypress.jsp").on("keydown.jsp",function(t){if(t.target===this||l.length&&e(t.target).closest(l).length){var i=w,s=g;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:o=t.keyCode,p();break;case 35:se(c-r),o=null;break;case 36:se(0),o=null}return!(n=t.keyCode==o&&i!=w||s!=g)}}).on("keypress.jsp",function(t){if(t.keyCode==o&&p(),t.target===this||l.length&&e(t.target).closest(l).length)return!n}),i.hideFocus?(t.css("outline","none"),"hideFocus"in a[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in a[0]&&t.attr("hideFocus",!1));function p(){var e=w,t=g;switch(o){case 40:M.scrollByY(i.keyboardSpeed,!1);break;case 38:M.scrollByY(-i.keyboardSpeed,!1);break;case 34:case 32:M.scrollByY(r*i.scrollPagePercent,!1);break;case 33:M.scrollByY(-r*i.scrollPagePercent,!1);break;case 39:M.scrollByX(i.keyboardSpeed,!1);break;case 37:M.scrollByX(-i.keyboardSpeed,!1)}return n=e!=w||t!=g}}(),i.clickOnTrack&&function(){Z(),u&&k.on("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var o,s=e(this),n=s.offset(),a=t.pageY-n.top-g,l=!0,p=function(){var e=s.offset(),n=t.pageY-e.top-C/2,u=r*i.scrollPagePercent,f=v*u/(c-r);if(a<0)g-f>n?M.scrollByY(-u):ee(n);else{if(!(a>0))return void d();g+f<n?M.scrollByY(u):ee(n)}o=setTimeout(p,l?i.initialDelay:i.trackClickRepeatFreq),l=!1},d=function(){o&&clearTimeout(o),o=null,e(document).off("mouseup.jsp",d)};return p(),e(document).on("mouseup.jsp",d),!1}});f&&B.on("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var o,s=e(this),r=s.offset(),a=t.pageX-r.left-w,c=!0,p=function(){var e=s.offset(),r=t.pageX-e.left-P/2,u=n*i.scrollPagePercent,f=m*u/(l-n);if(a<0)w-f>r?M.scrollByX(-u):oe(r);else{if(!(a>0))return void d();w+f<r?M.scrollByX(u):oe(r)}o=setTimeout(p,c?i.initialDelay:i.trackClickRepeatFreq),c=!1},d=function(){o&&clearTimeout(o),o=null,e(document).off("mouseup.jsp",d)};return p(),e(document).on("mouseup.jsp",d),!1}})}(),function(){if(location.hash&&location.hash.length>1){var t,o,i=escape(location.hash.substr(1));try{t=e("#"+i+', a[name="'+i+'"]')}catch(e){return}t.length&&s.find(i)&&(0===a.scrollTop()?o=setInterval(function(){a.scrollTop()>0&&(re(t,!0),e(document).scrollTop(a.position().top),clearInterval(o))},50):(re(t,!0),e(document).scrollTop(a.position().top)))}}(),i.hijackInternalLinks&&function(){if(e(document.body).data("jspHijack"))return;e(document.body).data("jspHijack",!0),e(document.body).delegate('a[href*="#"]',"click",function(t){var o,i,s,n,r,a=this.href.substr(0,this.href.indexOf("#")),l=location.href;if(-1!==location.href.indexOf("#")&&(l=location.href.substr(0,location.href.indexOf("#"))),a===l){o=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+o+', a[name="'+o+'"]')}catch(e){return}i.length&&(s=i.closest(".jspScrollable"),s.data("jsp").scrollToElement(i,!0),s[0].scrollIntoView&&(n=e(window).scrollTop(),((r=i.offset().top)<n||r>n+e(window).height())&&s[0].scrollIntoView()),t.preventDefault())}})}()):(t.removeClass("jspScrollable"),s.css({top:"0",left:"0",width:a.width()-Y}),a.off(O),s.find(":input,a").off("focus.jsp"),t.attr("tabindex","-1").removeAttr("tabindex").off("keydown.jsp keypress.jsp"),s.off(".jsp"),Z()),i.resizeSensor||!i.autoReinitialise||W?i.resizeSensor||i.autoReinitialise||!W||clearInterval(W):W=setInterval(function(){N(i)},i.autoReinitialiseDelay),i.resizeSensor&&!q&&(K(s,G),K(t,G),K(t.parent(),G),window.addEventListener("resize",G),q=!0),E&&t.scrollTop(0)&&se(E,!1),F&&t.scrollLeft(0)&&ne(F,!1),t.trigger("jsp-initialised",[f||u])}function K(e,t){var o,i,s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div");s.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",n.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",a.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",r.style.cssText="position: absolute; left: 0; top: 0;",l.style.cssText="position: absolute; left: 0; top: 0; width: 200%; height: 200%;";var c=function(){r.style.width=n.offsetWidth+10+"px",r.style.height=n.offsetHeight+10+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,o=e.width(),i=e.height()};n.addEventListener("scroll",function(){(e.width()>o||e.height()>i)&&t.apply(this,[]),c()}.bind(this)),a.addEventListener("scroll",function(){(e.width()<o||e.height()<i)&&t.apply(this,[]),c()}.bind(this)),n.appendChild(r),a.appendChild(l),s.appendChild(n),s.appendChild(a),e.append(s),"static"===window.getComputedStyle(e[0],null).getPropertyValue("position")&&(e[0].style.position="relative"),c()}function Q(){k.height(T+"px"),g=0,b=i.verticalGutter+k.outerWidth(),s.width(n-b-Y);try{0===y.position().left&&s.css("margin-left",b+"px")}catch(e){}}function U(){a.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){H-=e(this).outerWidth()}),B.width(H+"px"),w=0}function $(e,t,o,i){var s,n="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==n?r=t:t==r&&(n=t,s=o,o=i,i=s),e[n](o)[r](i)}function J(t,o,s){return function(){return function(t,o,s,n){s=e(s).addClass("jspActive");var r,a,l=!0,c=function(){0!==t&&M.scrollByX(t*i.arrowButtonSpeed),0!==o&&M.scrollByY(o*i.arrowButtonSpeed),a=setTimeout(c,l?i.initialDelay:i.arrowRepeatFreq),l=!1};c(),r=n?"mouseout.jsp":"mouseup.jsp",(n=n||e("html")).on(r,function(){s.removeClass("jspActive"),a&&clearTimeout(a),a=null,n.off(r)})}(t,o,this,s),this.blur(),!1}}function Z(){B&&B.off("mousedown.jsp"),k&&k.off("mousedown.jsp")}function _(){e("html").off("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),h&&h.removeClass("jspActive"),j&&j.removeClass("jspActive")}function ee(o,s){if(u){o<0?o=0:o>v&&(o=v);var n=new e.Event("jsp-will-scroll-y");if(t.trigger(n,[o]),!n.isDefaultPrevented()){var a=o||0,l=0===a,p=a==v,d=-(o/v)*(c-r);void 0===s&&(s=i.animateScroll),s?M.animate(h,"top",o,te,function(){t.trigger("jsp-user-scroll-y",[-d,l,p])}):(h.css("top",o+"px"),te(o),t.trigger("jsp-user-scroll-y",[-d,l,p]))}}}function te(e){void 0===e&&(e=h.position().top),a.scrollTop(0);var o=0===(g=e||0),n=g==v,l=-(e/v)*(c-r);I==o&&E==n||(I=o,E=n,t.trigger("jsp-arrow-change",[I,E,X,F])),function(e,t){i.showArrows&&(x[e?"addClass":"removeClass"]("jspDisabled"),S[t?"addClass":"removeClass"]("jspDisabled"))}(o,n),s.css("top",l+"px"),t.trigger("jsp-scroll-y",[-l,o,n]).trigger("scroll")}function oe(o,s){if(f){o<0?o=0:o>m&&(o=m);var r=new e.Event("jsp-will-scroll-x");if(t.trigger(r,[o]),!r.isDefaultPrevented()){var a=o||0,c=0===a,p=a==m,d=-(o/m)*(l-n);void 0===s&&(s=i.animateScroll),s?M.animate(j,"left",o,ie,function(){t.trigger("jsp-user-scroll-x",[-d,c,p])}):(j.css("left",o+"px"),ie(o),t.trigger("jsp-user-scroll-x",[-d,c,p]))}}}function ie(e){void 0===e&&(e=j.position().left),a.scrollTop(0);var o=0===(w=e||0),r=w==m,c=-(e/m)*(l-n);X==o&&F==r||(X=o,F=r,t.trigger("jsp-arrow-change",[I,E,X,F])),function(e,t){i.showArrows&&(z[e?"addClass":"removeClass"]("jspDisabled"),A[t?"addClass":"removeClass"]("jspDisabled"))}(o,r),s.css("left",c+"px"),t.trigger("jsp-scroll-x",[-c,o,r]).trigger("scroll")}function se(e,t){ee(e/(c-r)*v,t)}function ne(e,t){oe(e/(l-n)*m,t)}function re(t,o,s){var l,c,p,d,u,f,h,v,g,j=0,m=0;try{l=e(t)}catch(e){return}for(c=l.outerHeight(),p=l.outerWidth(),a.scrollTop(0),a.scrollLeft(0);!l.is(".jspPane");)if(j+=l.position().top,m+=l.position().left,l=l.offsetParent(),/^body|html$/i.test(l[0].nodeName))return;f=(d=le())+r,j<d||o?v=j-i.horizontalGutter:j+c>f&&(v=j-r+c+i.horizontalGutter),isNaN(v)||se(v,s),h=(u=ae())+n,m<u||o?g=m-i.horizontalGutter:m+p>h&&(g=m-n+p+i.horizontalGutter),isNaN(g)||ne(g,s)}function ae(){return-s.position().left}function le(){return-s.position().top}function ce(){return!1}"border-box"===t.css("box-sizing")?(R=0,Y=0):(R=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),Y=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0)),e.extend(M,{reinitialise:function(t){N(t=e.extend({},i,t))},scrollToElement:function(e,t,o){re(e,t,o)},scrollTo:function(e,t,o){ne(e,o),se(t,o)},scrollToX:function(e,t){ne(e,t)},scrollToY:function(e,t){se(e,t)},scrollToPercentX:function(e,t){ne(e*(l-n),t)},scrollToPercentY:function(e,t){se(e*(c-r),t)},scrollBy:function(e,t,o){M.scrollByX(e,o),M.scrollByY(t,o)},scrollByX:function(e,t){oe((ae()+Math[e<0?"floor":"ceil"](e))/(l-n)*m,t)},scrollByY:function(e,t){ee((le()+Math[e<0?"floor":"ceil"](e))/(c-r)*v,t)},positionDragX:function(e,t){oe(e,t)},positionDragY:function(e,t){ee(e,t)},animate:function(e,t,o,s,n){var r={};r[t]=o,e.animate(r,{duration:i.animateDuration,easing:i.animateEase,queue:!1,step:s,complete:n})},getContentPositionX:function(){return ae()},getContentPositionY:function(){return le()},getContentWidth:function(){return l},getContentHeight:function(){return c},getPercentScrolledX:function(){return ae()/(l-n)},getPercentScrolledY:function(){return le()/(c-r)},getIsScrollableH:function(){return f},getIsScrollableV:function(){return u},getContentPane:function(){return s},scrollToBottom:function(e){ee(v,e)},hijackInternalLinks:e.noop,destroy:function(){var e,o;e=le(),o=ae(),t.removeClass("jspScrollable").off(".jsp"),s.off(".jsp"),t.replaceWith(V.append(s.children())),V.scrollTop(e),V.scrollLeft(o),W&&clearInterval(W)}}),N(o)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var i=e(this),s=i.data("jsp");s?s.reinitialise(t):(e("script",i).filter('[type="text/javascript"],:not([type])').remove(),s=new o(i,t),i.data("jsp",s))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8,alwaysShowVScroll:!1,alwaysShowHScroll:!1,resizeSensor:!1,resizeSensorDelay:0}});